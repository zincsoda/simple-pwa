<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>My First PWA</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- iOS-specific meta -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
  <h1>Hello PWA üëã</h1>
  <input id="note" placeholder="Type something‚Ä¶" />
  <p id="saved"></p>
  <p id="version"></p>
  <p id="network"></p>
  <p>This is my first PWA.</p>

  <p id="mode"></p>
  <p id="loaded"></p>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js');
  }

  const isStandalone =
    window.matchMedia('(display-mode: standalone)').matches ||
    window.navigator.standalone === true;

  document.getElementById('mode').textContent =
    isStandalone ? '‚úÖ Running as installed app' : '‚ùå Running in browser';

  document.getElementById('loaded').textContent =
    'Loaded at: ' + new Date().toLocaleTimeString();
</script>
<script>
  function updateNetwork() {
    document.getElementById('network').textContent =
      navigator.onLine ? 'üü¢ Online' : 'üî¥ Offline';
  }

  window.addEventListener('online', updateNetwork);
  window.addEventListener('offline', updateNetwork);
  updateNetwork();
</script>
<script>
  const APP_VERSION = 'v2';

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js');
  }

  document.getElementById('version').textContent =
    'App version: ' + APP_VERSION;
</script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js').then(reg => {
      if (reg.waiting) {
        reg.waiting.postMessage('SKIP_WAITING');
      }
    });
  }
</script>
<script>
  const noteInput = document.getElementById('note');
  const saved = document.getElementById('saved');

  noteInput.value = localStorage.getItem('note') || '';

  noteInput.addEventListener('input', () => {
    localStorage.setItem('note', noteInput.value);
    saved.textContent = '‚úÖ Saved locally';
  });
</script>
</body>
